<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
  <!ENTITY productnamearch "<phrase xmlns='http://docbook.org/ns/docbook' role='productname'><phrase os='sles'>&sls; for &arm;</phrase></phrase>">
  <!ENTITY appliancename "&productnamearch; for the &rpi;">
  <!ENTITY jeos-firstboot "&jeos; First Boot Assistant">  
]>

<chapter version="5.0" role="General" 
  xml:id="cha-rpi-firstboot"
  xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>The &rpi; installation</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker></dm:bugtracker>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info> 
<sect1 xml:id="sec-rpi-firstboot">
  <title>Booting for the First Time</title>

  <para>
   After insertion of the prepared &microsd; card, connect a display, Ethernet
   and USB keyboard and mouse first, then provide power over Micro USB. After a
   few seconds you should be able to see a few lines of text on the screen. If
   that is not the case, recheck the connection to the display.
  </para>

  <note>
   <title>Operation Without Mouse</title>
   <para>
    The &jeos-firstboot; can be used without a mouse by only using the keyboard. Every
    user interface element has an accelerator configured, visible as highlighted letter.
    To activate such an accelerator, press the letter together with
    <keycap function="alt"/>.
   </para>
  </note>

  <para>
   On the first boot, the system will expand to fill the entire SD card, so be
   patient.
  </para>

  <sect2 xml:id="sec-rpi-firstboot-jeos">
   <title>Initial System Setup with &jeos-firstboot;</title>
   <para>
    After a few minutes, the &jeos-firstboot; will lead you through the initial system setup.
   </para>
   <procedure xml:id="pro-rpi-firstboot-jeos">
    <step>
     <para>
      Note that this minimized JeOS image comes without language selection.
      After the assistant finishes, you will be able to install and select your system locale.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_locale.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; showing information on setting locale</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      First, the keyboard layout needs to be configured.
      Use the arrow keys or first letter and select <guimenu>OK</guimenu>.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_keyboard.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; showing keyboard
                  configuration on first boot</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Read the License Agreement. You need to accept the license.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_eula_sles15sp1.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; displaying the license text</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Select the time zone by using the arrow keys or first letter.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_timezone.png"/>
       </imageobject>
       <textobject><phrase>&yast; asking for the time zone</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Select <guimenu>OK</guimenu> to proceed.
     </para>
    </step>
    <step>
     <para>
      You will be asked to provide a root password now. Do not forget what you
      enter here, as you will need it for administration.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_root.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; asking you to set a password for the
                  &rootuser; user</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Confirm the root password you just provided by typing it in again.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_root_confirm.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; asking you to confirm the password for the
                  &rootuser; user</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Note that you should register your system after installation,
      as detailed in <xref linkend="sec-rpi-registration"/>.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_reg_sles15sp1.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; showing registration
                  instructions</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
     <note>
      <title>Deferring Registration</title>
      <para>
       You will not receive
       updates or patches until you register using <emphasis role="italic">SUSEConnect</emphasis>.
      </para>
     </note>
    </step>
    <step>
     <para>
      Select <guimenu>OK</guimenu> to continue.
     </para>
    </step>
    <step>
     <para>
      Finally, you are offered the option to configure a wireless network.
      If you have a wired Ethernet connection, you can skip this step by selecting <guimenu>No</guimenu>.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_wifi.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; asking you whether to configure a wireless network</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
     <para>
      If you select <guimenu>Yes</guimenu>, you will see the following screens:
     </para>
     <remark>
      cwickert 2020-01-22: First step is commented out because rpi_first_wifi_interface.png
      needs an update (see https://bugzilla.suse.com/show_bug.cgi?id=1156663 and I'm not
      sure the step is still necessary. Why select a device if there is only one?
     </remark>
     <substeps>
      <!--
      <step>
       <para>
        Choose the network interface <guimenu>wlan0</guimenu> by selecting <guimenu>OK</guimenu>.
       </para>
       <informalfigure>
        <mediaobject>
         <imageobject>
          <imagedata width="80%" fileref="rpi_first_wifi_interface.png"/>
         </imageobject>
         <textobject>
          <phrase>
           &jeos-firstboot; asking you to select a wireless network device
          </phrase>
         </textobject>
        </mediaobject>
       </informalfigure>
      </step>
      -->
      <step>
       <para>
        Select a wireless network to connect to and proceed with
        <guimenu>OK</guimenu>.
       </para>
       <informalfigure>
        <mediaobject>
         <imageobject>
          <imagedata width="80%" fileref="rpi_first_wifi_ssid.png"/>
         </imageobject>
         <textobject>
          <phrase>
           &jeos-firstboot; asking you to select a wireless network
          </phrase>
         </textobject>
        </mediaobject>
       </informalfigure>
      </step>
      <step>
       <para>
        Select the authentication method for the wireless network and proceed
        with <guimenu>OK</guimenu>.
       </para>
       <informalfigure>
        <mediaobject>
         <imageobject>
          <imagedata width="80%" fileref="rpi_first_wifi_auth.png"/>
         </imageobject>
         <textobject>
          <phrase>&jeos-firstboot; asking you to select an authentication
           method for the wireless network</phrase>
         </textobject>
        </mediaobject>
       </informalfigure>
      </step>
      <step>
       <para>
        Enter the passphrase for the wireless network and proceed with
        <guimenu>OK</guimenu>.
       </para>
       <informalfigure>
        <mediaobject>
         <imageobject>
          <imagedata width="80%" fileref="rpi_first_wifi_passwd.png"/>
         </imageobject>
         <textobject><phrase>&jeos-firstboot; asking you to enter the
          passphrase for the wireless network</phrase>
         </textobject>
        </mediaobject>
       </informalfigure>
      </step>
     </substeps>
    </step>
   </procedure>
   <para>
    If you chose to skip configuration of wireless networks
    or if you fully completed their configuration,
    the &jeos-firstboot; will exit. The system continues to boot to a login prompt.
   </para>
   <para>
    You can now log in with &rootuser; user and the password you chose earlier.
   </para>
   <note>
    <title>Canceling the &jeos-firstboot;</title>
    <para>
     If at any point you select to <guimenu>Cancel</guimenu> the assistant,
     the system will shut down. You can then disconnect the power supply,
     make any necessary changes and start over.
    </para>
   </note>
  </sect2>

  <sect2 xml:id="sec-rpi-registration">
   <title>Registration Process</title>
   <para>
    It is very important to register your &productnamearch;
    subscription to ensure full functionality of your &rpi; system. The
    SD card image provided by &suse; contains a minimal set of packages that are
    intended for the initial boot process and to get your &rpi; onto the
    network.
   </para>
   <para>
    When you have registered your &productnamearch;
    subscription, you can download other packages you may need, such as
    compilers. The &sls; version that runs on your
    &rpi; is the same version that runs on &x86-64;, &power;, &zseries;, or on
    other &arm;-based systems.
   </para>
   <important>
    <title>Setting the Clock</title>
    <para>
     Because the &rpi; does not have a persistent Real Time Clock, make
     sure that the clock is set to the current date and time before attempting
     to use Zypper or &yast; to install additional packages.
    </para>
   </important>
   <para>
    You can initially register your system with the
    <emphasis role="italic">SUSEConnect</emphasis> tool.
    Afterwards you can also make use of the
    <emphasis role="italic">&yast; Product Registration</emphasis> module.
   </para>
   <note>
    <title>Evaluation Code</title>
    <para>
     Sixty day evaluation subscriptions may be requested at the following page:
     <link xlink:href="https://www.suse.com/products/arm/" />
    </para>
   </note>
   <para>
    <emphasis role="strong">After you have obtained a registration code from a
    subscription card, you need to activate your subscription on the &scc;
    at:</emphasis>
   </para>
   <para>
    <link xlink:href="&sccurl;" />
   </para>
   <para>
    To register your subscription, perform the following steps:
   </para>
   <procedure xml:id="pro-rpi-reg-process">
    <step>
     <para>
      Log in to the &scc; using a browser on another machine.
      Create an account if required:
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_scc.png"/>
       </imageobject>
       <textobject><phrase>Log in to the &scc;</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Click <guimenu>Manually Activate Subscriptions</guimenu>:
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_management_tools.png"/>
       </imageobject>
       <textobject><phrase>Manual activation of subscription.</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Click the dialog field <guimenu>Activate a single subscription</guimenu>:
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%"
                  fileref="rpi_activate_subscription.png"/>
       </imageobject>
       <textobject><phrase>Activate a single subscription.</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Enter the registration code and accept the terms and conditions:
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_enter_code.png"/>
       </imageobject>
       <textobject><phrase>Enter the registration code.</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Confirm the subscription activation and the organization assignment.
      Click <guimenu>Activate</guimenu>:
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_confirm_activation.png"
                />
       </imageobject>
       <textobject><phrase>Confirm the activation.</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Your subscription is now active and ready to be used:
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_success.png"/>
       </imageobject>
       <textobject><phrase>You now have an active subscription.</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
   </procedure>
   <para>
    To register the system, use the <emphasis role="italic">SUSEConnect</emphasis> tool as instructed earlier:
   </para>
   <screen>&prompt.root;SUSEConnect -e <replaceable>company@example.com</replaceable> -r <replaceable>YOUR_CODE</replaceable>
Registering system to SUSE Customer Center
Using E-Mail: <replaceable>company@example.com</replaceable>

Announcing system to https://scc.suse.com ...

Activating SLES &product-ga;.&product-sp; aarch64 ...
-> Adding service to system ...

Activating sle-module-basesystem &product-ga;.&product-sp; aarch64 ...
-> Adding service to system ...
-> Installing release package ...

Activating sle-module-server-applications &product-ga;.&product-sp; aarch64 ...
-> Adding service to system ...
-> Installing release package ...

Successfully registered system</screen>
   <para>
    This may take a few moments.
    Afterwards you will have access to online repositories for installing more packages,
    as described in <xref linkend="sec-rpi-platform-software-zypper"/>.
   </para>
   <example xml:id="ex-rpi-zypper-yast">
    <title>Installing &yast;</title>
    <para>
     Later sections may assume you have installed &yast; for system configuration:
    </para>
    <screen>&prompt.root;zypper in -t pattern yast2_basis</screen>
   </example>
   <note>
    <title>Module Availability</title>
    <para>
     Your subscription gives you access to more than the above
     <emphasis role="italic">Basesystem Module</emphasis> and
     <emphasis role="italic">Server Applications Module</emphasis>.
     To activate additional Modules, you can use the
     <emphasis role="italic">&yast; Add System Extensions or Modules</emphasis> module.
    </para>
   </note>
  </sect2>
 </sect1>
</chapter>
