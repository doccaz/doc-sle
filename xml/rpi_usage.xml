<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
  <!ENTITY productnamearch "<phrase xmlns='http://docbook.org/ns/docbook' role='productname'><phrase os='sles'>&sls; for &arm;</phrase></phrase>">
  <!ENTITY appliancename "&productnamearch; for the &rpi;">
  <!ENTITY jeos-firstboot "&jeos; First Boot Assistant">  
]>

<chapter version="5.0" role="General" 
  xml:id="cha-rpi-usage"
  xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>The &rpi; installation</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker></dm:bugtracker>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 
<sect1 xml:id="sec-rpi-usage">
  <title>General System Usage</title>

  <para>
   After the initial configuration procedure and the first boot of the system,
   you can now use various components of the system.
  </para>

  <sect2 xml:id="sec-rpi-bt">
   <title>&bt;</title>
   <para>
    &rpi3; and later have a &btreg; controller on-board that can be used for various
    purposes, like wireless keyboards, mice or audio devices.
   </para>
   <para>
    If not done already, you will need to enable the
    <emphasis role="italic">Desktop Applications Module</emphasis>.
    Assuming you have registered the base product already,
    as described in <xref linkend="sec-rpi-registration"/>,
    the fastest way to enable the Module is:
   </para>
   <screen>&prompt.root;SUSEConnect -p sle-module-desktop-applications/&product-ga;.&product-sp;/aarch64
Registering system to SUSE Customer Center

Updating system details on https://scc.suse.com ...

Activating sle-module-desktop-applications &product-ga;.&product-sp; aarch64 ...
-> Adding service to system ...
-> Installing release package ...

Successfully registered system
</screen>
   <para>
    Then you can install the <emphasis role="italic">BlueZ</emphasis> software stack:
   </para>
   <screen>&prompt.root;zypper install bluez</screen>
   <para>
    To enable the &btreg; controller for use with
    <command>bluetoothctl</command> and related applications,
    for example, on &rpi3; Model&nbsp;B with the default UART configuration, run:
   </para>
<screen>&prompt.root;hciattach /dev/ttyAMA1 bcm43xx 921600
bcm43xx_init
Flash firmware /lib/firmware/<replaceable>BCM43430A1</replaceable>.hcd
Set Controller UART speed to 921600 bit/s
Device setup complete</screen>
   <para>
    Note: The command is the same for &rpi4; Model&nbsp;B,
    just the chipset name and thus firmware filename in the output will be different.
   </para>
   <para>
    You can then use <command>hciconfig hci0 up</command> to bring the device
    up and use <command>hcitool scan</command> to scan the environment for
    discoverable devices.
   </para>
  </sect2>
 </sect1>
</chapter>
